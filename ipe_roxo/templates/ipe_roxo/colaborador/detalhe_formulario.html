{% extends 'ipe_roxo/partials/base.html' %}
{% load static %}

{% block title %}Formulários Enviados{% endblock title %}

{% block content %}
{% include 'ipe_roxo/partials/navbar_colaborador.html' %}
<div class="container my-5">
  <h2 class="mb-4 text-center">Formulários Recebidos</h2>

  {% if messages %}
    <div class="mb-3">
      {% for message in messages %}
        <div class="alert alert-{{ message.tags }}">{{ message }}</div>
      {% endfor %}
    </div>
  {% endif %}

  {% if formularios %}
    <div class="table-responsive">
      <table class="table table-striped table-bordered">
        <thead class="table-dark">
          <tr>
            <th>Nº Registro</th>
            <th>Espécie</th>
            <th>Bairro</th>
            <th>Data de Recebimento</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          {% for f in formularios %}
            <tr>
              <!-- Número de Registro clicável -->
              <td>
                <a href="{% url 'detalhe_formulario' f.id %}" 
                   style="color: inherit; text-decoration: none; font-weight: bold;">
                  {{ f.numero_registro }}
                </a>
              </td>

              <td>{{ f.especie }}</td>
              <td>{{ f.bairro }}</td>
              <td>{{ f.data_recebimento|date:"d/m/Y" }}</td>

              <!-- Botão de status -->
              <td>
                {% if f.status == 'novo' %}
                  <span class="badge bg-primary">Novo</span>
                {% elif f.status == 'aceito' %}
                  <span class="badge bg-success">Aceito</span>
                {% elif f.status == 'atualizado' %}
                  <span class="badge bg-warning text-dark">Atualizado</span>
                {% endif %}
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <div class="alert alert-info text-center">
      Nenhum formulário recebido.
    </div>
  {% endif %}
</div>
{% endblock %}